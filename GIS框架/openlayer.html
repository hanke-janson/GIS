<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://lib.baomitu.com/openlayers/4.6.5/ol.css">
    <script src="https://lib.baomitu.com/openlayers/4.6.5/ol.js"></script>
</head>

<body>
    <div id="map">

    </div>
    <script>
        const map = new ol.Map({
            // 将实例化的地图挂载到对应DOM,相当于vue的el
            target: 'map',
            layers: [
                // new ol.layer.Tile({ source: new ol.source.OSM() })
                new ol.layer.Tile({
                    name: "img.net",
                    source: new ol.source.XYZ({
                        url: "",
                        wrapX: false,
                        tileLoadFunction: function (tile, src) {
                            var client = new XMLHttpRequest();
                            client.responseType = 'blob';
                            client.addEventListener('loadend', function (evt) {
                                const data = this.response;
                                if (data !== undefined) {
                                    tile.getImage().src = URL.createObjectURL(data);
                                } else {
                                    tile.setState(TileState.ERROR);
                                }
                            });
                            client.addEventListener('error', function () {
                                tile.setState(TileState.ERROR);
                            });
                            client.open('GET', src);
                            client.setRequestHeader('', '');
                            client.setRequestHeader('', '');
                            client.send();
                        }
                    })
                })
            ],
            // 设置地图以什么样的形式展示
            view: new ol.View({
                // 设置中心点
                center: [114, 30],
                // 放大级别
                zoom: 5,
                // 坐标
                projection: 'EPSG:4326',
            })
        })
    </script>
</body>

</html>